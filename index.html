<!DOCTYPE html>
<html lang="sq">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Biblioteka Online</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; background:#f5f5f5; }

/* Header */
header { 
    background:#2b3a67; 
    color:white; 
    padding:10px 20px; 
    display:flex; 
    flex-direction:column; 
    align-items:center; 
    justify-content:center; 
    position:relative; 
}
header h1 { 
    margin:0; 
    font-size:24px; 
    text-align:center; 
    width:100%; 
}
#searchBox { 
    margin-top:10px; 
    padding:7px 12px; 
    border-radius:5px; 
    border:none; 
    width:90%; 
    max-width:400px; 
    font-size:14px; 
}

/* Burger menu */
#burger { 
    font-size:28px; 
    cursor:pointer; 
    position:absolute; 
    left:25px; 
    top:15px; 
    color:white; 
    z-index:20; 
}
    /* Close nav (iks) */
#closeNav { 
    text-align:right; 
    font-size:25px; 
    cursor:pointer; 
    margin-bottom:10px;
    display:block;
    padding-right:10px; /* largimi nga skaji djathtas */
}

/* Navigation Menu */
nav { 
    display:none; 
    background:white; 
    padding:10px; 
    position:fixed; 
    top:0; 
    left:0; 
    width:250px; 
    height:100%; 
    box-shadow:2px 0 6px rgba(0,0,0,0.2); 
    z-index:15; 
    border-radius:0 10px 10px 0; 
    overflow-y:auto;
}
nav ul { 
    list-style:none; 
    padding:0; 
    margin:0; 
    margin-top:30px; 
}
nav ul li { 
    padding:12px 10px; 
    border-bottom:1px solid #ccc; 
    cursor:pointer; 
    font-weight:bold; 
}
nav ul li:hover { background:#eee; }
#closeNav { 
    text-align:right; 
    font-size:25px; 
    cursor:pointer; 
    margin-bottom:10px;
}

/* Books container */
#booksContainer { 
    max-width:1000px; 
    margin:20px auto; 
    display: grid; 
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); 
    gap:15px; 
    padding:0 10px; 
}
.bookCard { 
    background:white; 
    padding:10px; 
    border-radius:10px; 
    box-shadow:0 2px 6px rgba(0,0,0,0.2); 
    text-align:center; 
    display:flex; 
    flex-direction:column; 
    align-items:center; 
    cursor:pointer; 
    border:2px solid #2b3a67; 
    transition: transform 0.2s, box-shadow 0.2s; 
    width:100%;
    box-sizing:border-box;
}
.bookCard:hover { transform: translateY(-3px); box-shadow:0 4px 8px rgba(0,0,0,0.3); }
.bookCard img { width:140px; height:180px; object-fit:cover; border-radius:5px; }
.bookCard h3 { margin:10px 0 6px; font-size:16px; }
.bookCard p { font-size:13px; margin:4px 0; }
.bookCard a { display:inline-block; margin-top:6px; padding:6px 12px; background:#2b3a67; color:white; border-radius:5px; text-decoration:none; font-weight:bold; transition:0.3s; font-size:14px; }
.bookCard a:hover { background:#1d2750; }

/* Modal */
#bookModal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.7); justify-content:center; align-items:center; z-index:100; padding:10px; }
#bookModalContent { background:white; padding:20px; border-radius:10px; max-width:400px; width:100%; max-height:90%; overflow-y:auto; position:relative; }
#bookModalContent img { width:100%; height:auto; border-radius:5px; }
#closeModal { cursor:pointer; float:right; font-size:22px; font-weight:bold; }

/* Responsive */
@media (max-width:800px) {
  #booksContainer { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap:12px; }
  .bookCard img { width:120px; height:160px; }
  .bookCard h3 { font-size:14px; }
  .bookCard p { font-size:12px; }
  .bookCard a { font-size:12px; padding:4px 6px; }
}

@media (max-width:500px) {
  #booksContainer { grid-template-columns: repeat(2, 1fr); gap:10px; padding:0 5px; }
  .bookCard img { width:100px; height:140px; }
  .bookCard h3 { font-size:13px; }
  .bookCard p { font-size:11px; }
  .bookCard a { font-size:11px; padding:3px 5px; }
}
</style>
</head>
<body>
<header>
  <div id="burger">&#9776;</div>
  <h1>Biblioteka Online</h1>
  <input type="text" id="searchBox" placeholder="Kërko libër ose autor...">
</header>

<nav id="navMenu">
  <span id="closeNav">✖</span>
  <ul>
    <li class="categoryItem" data-category="">Të gjitha</li>
    <li class="categoryItem" data-category="Romane">Romane</li>
    <li class="categoryItem" data-category="Letërsi Shqipe">Letërsi Shqipe</li>
    <li class="categoryItem" data-category="Te tjera">Të tjera</li>
    <li id="cPanelLink">C Panel</li>
  </ul>
</nav>

<div id="booksContainer"></div>

<!-- Modal -->
<div id="bookModal">
  <div id="bookModalContent">
    <span id="closeModal">✖</span>
    <div id="modalContent"></div>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, getDocs, query, where } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBrH_LPGz-66c9s9LYqmnyjCEX1yUGt3BA",
  authDomain: "bibliotekaapp-2f2b5.firebaseapp.com",
  projectId: "bibliotekaapp-2f2b5",
  storageBucket: "bibliotekaapp-2f2b5.appspot.com",
  messagingSenderId: "1056004303783",
  appId: "1:1056004303783:web:335725cdfeefc690702482",
  measurementId: "G-QHEGWD5J2B"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const booksContainer = document.getElementById("booksContainer");
const navMenu = document.getElementById("navMenu");
const burger = document.getElementById("burger");
const cPanelLink = document.getElementById("cPanelLink");
const categoryItems = document.querySelectorAll(".categoryItem");
const searchBox = document.getElementById("searchBox");

const bookModal = document.getElementById("bookModal");
const modalContent = document.getElementById("modalContent");
const closeModal = document.getElementById("closeModal");
const closeNav = document.getElementById("closeNav");

// Burger toggle
burger.addEventListener("click", () => { navMenu.style.display = "block"; });
closeNav.addEventListener("click", () => { navMenu.style.display = "none"; });

// C Panel
cPanelLink.addEventListener("click", () => { window.location.href = "panel.html"; });

// Ngarko librat
async function loadBooks(category = null, searchText = "") {
  booksContainer.innerHTML = "";
  let booksQuery = collection(db, "books");
  if(category) booksQuery = query(collection(db, "books"), where("category","==",category));
  const snapshot = await getDocs(booksQuery);
  snapshot.forEach(doc => {
    const data = doc.data();
    if(searchText && !(data.title.toLowerCase().includes(searchText.toLowerCase()) || data.author.toLowerCase().includes(searchText.toLowerCase()))) return;
    const div = document.createElement("div");
    div.className = "bookCard";
    div.innerHTML = `
      <img src="${data.imageUrl}" alt="${data.title}">
      <h3>${data.title}</h3>
      <p><strong>Autor:</strong> ${data.author}</p>
      <p><strong>Viti:</strong> ${data.year}</p>
      <a href="${data.pdfUrl}" target="_blank">Shkarko PDF</a>
    `;
    div.addEventListener("click", (e) => {
      if(e.target.tagName !== 'A') showBookModal(data);
    });
    booksContainer.appendChild(div);
  });
}

// Modal funksion
function showBookModal(bookData) {
  modalContent.innerHTML = `
    <h2>${bookData.title}</h2>
    <p><strong>Autor:</strong> ${bookData.author}</p>
    <p><strong>Viti:</strong> ${bookData.year}</p>
    <img src="${bookData.imageUrl}" alt="${bookData.title}">
    <p>${bookData.description}</p>
    <a href="${bookData.pdfUrl}" target="_blank">Shkarko PDF</a>
  `;
  bookModal.style.display = "flex";
}

// Close modal
closeModal.addEventListener("click", () => { bookModal.style.display = "none"; });

// Filtrimi sipas kategorive
categoryItems.forEach(item => {
  item.addEventListener("click", () => {
    const selectedCategory = item.dataset.category || null;
    loadBooks(selectedCategory, searchBox.value);
    navMenu.style.display = "none";
  });
});

// Filtrimi sipas kërkimit
searchBox.addEventListener("input", () => {
  loadBooks(null, searchBox.value);
});

// Ngarko librat fillimisht
loadBooks();
</script>
</body>
</html>




